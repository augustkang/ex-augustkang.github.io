<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  
  <link rel="prev" href="https://augustkang.github.io/2019/linux-kernel-story-for-devops-and-se-ch1/" />
  <link rel="next" href="https://augustkang.github.io/2019/linux-kernel-story-for-devops-and-se-ch3/" />
  <link rel="canonical" href="https://augustkang.github.io/2019/linux-kernel-story-for-devops-and-se-ch2/" />
  <link rel='shortcut icon' type='image/x-icon' href='/images/favicon.ico' />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="manifest" href="/images/site.webmanifest">
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           [요약]DevOps와 SE를 위한 리눅스 커널 이야기 2장 | augustkang
       
  </title>
  <meta name="title" content="[요약]DevOps와 SE를 위한 리눅스 커널 이야기 2장 | augustkang">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[요약]DevOps와 SE를 위한 리눅스 커널 이야기 2장"/>
<meta name="twitter:description" content="2장 - top을 통해 프로세스 정보 살펴보기 top 명령어 실행 결과 root@August-PC:~# top -b -n 1 top - 01:57:36 up 58 min, 0 users, load average: 0.52, 0.58, 0.59 Tasks: 8 total, 1 running, 7 sleeping, 0 stopped, 0 zombie %Cpu(s): 9.0 us, 23.3 sy, 0.0 ni, 67.4 id, 0.0 wa, 0.3 hi, 0.0 si,KiB Mem : 8240388 total, 2032052 free, 5978984 used, 229352 buff/cKiB Swap: 25165824 total, 24837212 free, 328612 used."/>

  <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "[요약]DevOps와 SE를 위한 리눅스 커널 이야기 2장",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https:\/\/augustkang.github.io\/2019\/linux-kernel-story-for-devops-and-se-ch2\/"
  },
  "image": {
    "@type": "ImageObject",
    "url": "https:\/\/augustkang.github.io\/logo.png",
    "width":  800 ,
    "height":  600 
  },
  "genre": "posts",
  
  "wordcount":  476 ,
  "url": "https:\/\/augustkang.github.io\/2019\/linux-kernel-story-for-devops-and-se-ch2\/",
  "datePublished": "2019-07-11T01:55:00\x2b09:00",
  "dateModified": "2019-07-11T01:55:00\x2b09:00",
  
  "publisher": {
    "@type": "Organization",
    "name": "augustkang",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/augustkang.github.io\/logo.png",
      "width":  127 ,
      "height":  40 
    }
  },
  "author": {
    "@type": "Person",
    "name": "augustkang"
  },
  "description": ""
}
</script>
</head>

  



  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="https://augustkang.github.io">augustkang</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;<a href="https://augustkang.github.io">augustkang</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
        </div>
    </div>
</nav>

    	 <main class="main">
          <div class="container">
      		
<article class="post-warp">
    <header class="post-header">
        <h1 class="post-title">[요약]DevOps와 SE를 위한 리눅스 커널 이야기 2장</h1>
        <div class="post-meta">
            Written by <a href="https://augustkang.github.io" rel="author">augustkang</a> with ♥ 
                <span class="post-time">
                    on <time datetime=2019-07-11 >11 July 2019</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://augustkang.github.io/categories/book/"> book </a>
                        <a href="https://augustkang.github.io/categories/linux/"> linux </a>
                        
                </span>
                <i class="iconfont icon-timer"></i>
                3 min
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          

<h1 id="2장-top을-통해-프로세스-정보-살펴보기">2장 - top을 통해 프로세스 정보 살펴보기</h1>

<h3 id="top-명령어-실행-결과">top 명령어 실행 결과</h3>

<pre><code class="language-bash">root@August-PC:~# top -b -n 1
top - 01:57:36 up 58 min,  0 users,  load average: 0.52, 0.58, 0.59
Tasks:   8 total,   1 running,   7 sleeping,   0 stopped,   0 zombie   
%Cpu(s):  9.0 us, 23.3 sy,  0.0 ni, 67.4 id,  0.0 wa,  0.3 hi,  0.0 si,KiB Mem :  8240388 total,  2032052 free,  5978984 used,   229352 buff/cKiB Swap: 25165824 total, 24837212 free,   328612 used.  2127672 avail 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+    
    1 root      20   0    8916    328    284 S   0.0  0.0   0:00.07    
  880 root      20   0    8916    228    176 S   0.0  0.0   0:00.01    
  881 august    20   0   18356   3764   3448 S   0.0  0.0   0:00.38    
 1074 root      20   0    8916    232    180 S   0.0  0.0   0:00.00    
 1075 august    20   0   18224   3492   3364 S   0.0  0.0   0:00.09    
 1087 root      20   0   16260   2116   2088 S   0.0  0.0   0:00.01    
 1088 root      20   0   18088   3392   3304 S   0.0  0.0   0:00.06    
 1104 root      20   0   18780   1888   1420 R   0.0  0.0   0:00.01
</code></pre>

<ul>
<li>line 1: 현재 시스템의 시간과 uptime, 그리고 load average가 나온다</li>
<li>line 2: 현재 실행중인 process들</li>
<li>line 3: 리소스 사용량 통계</li>
<li>PID: process id, PR : Priority, NI : Nice value</li>
<li>VIRT : VIRTual memory, 해당 프로세스에게 할당된 가상메모리 전체의 크기</li>
<li>RES: RESident memory, 해당 프로세스가 실제로 사용중인 물리메모리의 양</li>
<li>S : Process Status</li>
</ul>

<h3 id="memory-commit-의-개념">Memory Commit 의 개념</h3>

<p>커널은 프로세스가 메모리를 요청할 때 그에 맞는 크기를 가상으로 할당해준다. 실제로 요청받은 크기 전체만큼 물리메모리에 assign해주지는 않음.
그렇게 있다가 실제로 사용이 필요할 때마다 물리메모리를 조금씩 더 할당을 해줌(늘려줌). 이를 memory commit 이라고 한다.</p>

<ul>
<li>vm.overcommit_memory는 커널의 Memory commit 동작 방식을 변경할 수 있게 해주는 커널 파라미터.</li>
<li>0=최댓값 바탕으로 Memory commit, 1=무조건 overcommit, 2=vm.overcommit_ratio에 설정된 비율을 바탕으로 제한적으로 memory commit</li>
</ul>

<h4 id="커널-파라미터-보는법-sysctl">커널 파라미터 보는법? sysctl</h4>

<pre><code class="language-bash">root@August-PC:~# sysctl -a
fs.binfmt_misc.status = enabled
fs.binfmt_misc.WSLInterop = enabled
fs.binfmt_misc.WSLInterop = interpreter /init
...
...
vm.min_free_kbytes = 45056
vm.overcommit_memory = 0
vm.swappiness = 60
</code></pre>

<ul>
<li><code>sysctl -a | grep pid_max</code> 하면 현재 시스템의 생성 가능한 최대 pid 확인 가능</li>
</ul>

<h3 id="프로세스-상태">프로세스 상태</h3>

<ul>
<li>Process Status 종류 : D, R, S, T, Z</li>
<li>D = Uninterruptible sleep - 디스크, 네트워크 디바이스에 작업 요청 후 대기중인 상태(Run queue가 아닌 wait queue에 넣어놓음)</li>
<li>R = Running - 현재 CPU에서 실행되고 있는 상태</li>
<li>S = Sleep - 그냥 자고있는 애들. D와의 차이는 요청한 리소스를 즉시 사용할 수 있는지 여부이다.</li>
<li>T = traced or stopped. strace 등으로 프로세스가 추적되고 있는 상태</li>
<li>Z = zombie 상태. parent process가 죽은 child process를 의미</li>
</ul>

<h3 id="프로세스-우선-순위">프로세스 우선 순위</h3>

<ul>
<li>기본 PR값은 20이다.</li>
<li>PR값에서 NI값을 뺀 값이 최종 우선순위가 된다. 숫자 0에 가까울수록 우선순위 높은것(뭔개소리죠??? 직접 해보면 안다&hellip;)</li>
<li><code>nice -n N command</code> 명령으로 해당 프로세스 nice 값을 부여해줄 수 있음.(N은 원하는 숫자)</li>
<li>RT는 RealTime의 약자로써, RT 스케줄러에 의해 실시간으로 커널에 의해 처리되는 프로세스들임. CFQ(Completely Fair Queueing) 스케줄러보다 먼저 실행된다.</li>
</ul>

<p><em>아 커널 소스 나와서 당황했다. 절대 만만치 않은 책인 듯 싶다.</em></p>

<p>출처 : <a href="http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;mallGb=KOR&amp;barcode=9788966264049&amp;orderClick=LEA&amp;Kc=" rel="nofollow noreferrer" target="_blank">DevOps와 SE를 위한 리눅스 커널 이야기</a></p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>augustkang </span>
                </p>
            
           
            <p class="copyright-item">
                    <span>Words:</span>
                   <span>476</span>
            </p>
            
            <p class="copyright-item">
                
                <span>Share:</span>
                <span>

      
        <a href="//twitter.com/share?url=https%3a%2f%2faugustkang.github.io%2f2019%2flinux-kernel-story-for-devops-and-se-ch2%2f&amp;text=%5b%ec%9a%94%ec%95%bd%5dDevOps%ec%99%80%20SE%eb%a5%bc%20%ec%9c%84%ed%95%9c%20%eb%a6%ac%eb%88%85%ec%8a%a4%20%ec%bb%a4%eb%84%90%20%ec%9d%b4%ec%95%bc%ea%b8%b0%202%ec%9e%a5&amp;via=" target="_blank" title="Share on Twitter">
          <i class="iconfont icon-twitter"></i>
        </a>
        
      
      
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2faugustkang.github.io%2f2019%2flinux-kernel-story-for-devops-and-se-ch2%2f" target="_blank" title="Share on Facebook">
          <i class="iconfont icon-facebook"></i>
        </a>
        
      
      
      
      
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2faugustkang.github.io%2f2019%2flinux-kernel-story-for-devops-and-se-ch2%2f&amp;title=%5b%ec%9a%94%ec%95%bd%5dDevOps%ec%99%80%20SE%eb%a5%bc%20%ec%9c%84%ed%95%9c%20%eb%a6%ac%eb%88%85%ec%8a%a4%20%ec%bb%a4%eb%84%90%20%ec%9d%b4%ec%95%bc%ea%b8%b0%202%ec%9e%a5" target="_blank" title="Share on LinkedIn">
          <i class="iconfont icon-linkedin"></i>
        </a>
        
      
      
        
      
        
      

          

          

          

          
</span>
                
            </p>

             
            <p class="copyright-item">
                Released under <a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a>
            </p>
            
    </div>

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">Back</a></span> · 
                <span><a href="https://augustkang.github.io">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://augustkang.github.io/2019/linux-kernel-story-for-devops-and-se-ch1/" class="prev" rel="prev" title="[요약]DevOps와 SE를 위한 리눅스 커널 이야기 1장"><i class="iconfont icon-dajiantou"></i>&nbsp;[요약]DevOps와 SE를 위한 리눅스 커널 이야기 1장</a>
         
        
        <a href="https://augustkang.github.io/2019/linux-kernel-story-for-devops-and-se-ch3/" class="next" rel="next" title="[요약]DevOps와 SE를 위한 리눅스 커널 이야기 3장">[요약]DevOps와 SE를 위한 리눅스 커널 이야기 3장&nbsp;<i class="iconfont icon-xiaojiantou"></i></a>
        
    </div>

    <div class="post-comment">
          
          
  


          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2019</span>
        
         
            <span class="author" itemprop="copyrightHolder"><a href="https://augustkang.github.io">augustkang</a> | </span>
         

		  <span>Crafted with ❤️ by <a href="https://github.com/Fastbyte01/KeepIt" target="_blank" rel="external nofollow noopener noreffer">KeepIt</a> & <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a></span>
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  







     </div>
  </body>
</html>
